<!-- source: http://jsfiddle.net/01b97w0L/ -->
<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8' />
    <title></title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.28.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.28.0/mapbox-gl.css' rel='stylesheet' />
    <style>
    body {
        margin: 0;
        padding: 0;
    }

    #map {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 100%;
    }
    </style>
</head>

<body>
    <style>
    .mapboxgl-popup {
        max-width: 400px;
        font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
    }
    </style>
    <div id='map'></div>
    <script>

    // var linkData = [
    // {"COUNTYFP10": "013", "Name": 'Barrow', "URL":'http://77.104.152.48/~arctrpst/neighborhoodnexus/maps-and-data/profiles/county-profiles/barrow-county-profile/'},
    // {"COUNTYFP10": "015", "Name": 'Bartow', "URL":'http://77.104.152.48/~arctrpst/neighborhoodnexus/maps-and-data/profiles/county-profiles/bartow-county-profile/'},
    // {"COUNTYFP10": "045", "Name": 'Carroll', "URL":'http://77.104.152.48/~arctrpst/neighborhoodnexus/maps-and-data/profiles/county-profiles/Carroll-county-profile/'},
    // {"COUNTYFP10": "057", "Name": 'Cherokee', "URL":'http://77.104.152.48/~arctrpst/neighborhoodnexus/maps-and-data/profiles/county-profiles/Cherokee-county-profile/'},
    // {"COUNTYFP10": "063", "Name": 'Clayton', "URL":'http://77.104.152.48/~arctrpst/neighborhoodnexus/maps-and-data/profiles/county-profiles/Clayton-county-profile/'},
    // {"COUNTYFP10": "067", "Name": 'Cobb', "URL":'http://77.104.152.48/~arctrpst/neighborhoodnexus/maps-and-data/profiles/county-profiles/Cobb-county-profile/'},
    // {"COUNTYFP10": "077", "Name": 'Coweta', "URL":'http://77.104.152.48/~arctrpst/neighborhoodnexus/maps-and-data/profiles/county-profiles/Coweta-county-profile/'},
    // {"COUNTYFP10": "089", "Name": 'DeKalb', "URL":'http://77.104.152.48/~arctrpst/neighborhoodnexus/maps-and-data/profiles/county-profiles/DeKalb-county-profile/'},
    // {"COUNTYFP10": "097", "Name": 'Douglas', "URL":'http://77.104.152.48/~arctrpst/neighborhoodnexus/maps-and-data/profiles/county-profiles/Douglas-county-profile/'},
    // {"COUNTYFP10":"113", "Name": 'Fayette', "URL": 'http://77.104.152.48/~arctrpst/neighborhoodnexus/maps-and-data/profiles/county-profiles/Fayette-county-profile/'},
    // {"COUNTYFP10": "117", "Name": 'Forsyth', "URL":'http://77.104.152.48/~arctrpst/neighborhoodnexus/maps-and-data/profiles/county-profiles/Forsyth-county-profile/'},
    // {"COUNTYFP10": "121", "Name": 'Fulton', "URL":'http://77.104.152.48/~arctrpst/neighborhoodnexus/maps-and-data/profiles/county-profiles/Fulton-county-profile/'},
    // {"COUNTYFP10": "135", "Name": 'Gwinnett', "URL":'http://77.104.152.48/~arctrpst/neighborhoodnexus/maps-and-data/profiles/county-profiles/Gwinnett-county-profile/'},
    // {"COUNTYFP10": "139", "Name": 'Hall', "URL":'http://77.104.152.48/~arctrpst/neighborhoodnexus/maps-and-data/profiles/county-profiles/Hall-county-profile/'},
    // {"COUNTYFP10": "151", "Name": 'Henry', "URL":'http://77.104.152.48/~arctrpst/neighborhoodnexus/maps-and-data/profiles/county-profiles/Henry-county-profile/'},
    // {"COUNTYFP10": "217", "Name": 'Newton', "URL":'http://77.104.152.48/~arctrpst/neighborhoodnexus/maps-and-data/profiles/county-profiles/Newton-county-profile/'},
    // {"COUNTYFP10": "223", "Name": 'Paulding', "URL":'http://77.104.152.48/~arctrpst/neighborhoodnexus/maps-and-data/profiles/county-profiles/Paulding-county-profile/'},
    // {"COUNTYFP10":"247", "Name": 'Rockdale', "URL":'http://77.104.152.48/~arctrpst/neighborhoodnexus/maps-and-data/profiles/county-profiles/Rockdale-county-profile/'},
    // {"COUNTYFP10": "255", "Name": 'Spalding', "URL":'http://77.104.152.48/~arctrpst/neighborhoodnexus/maps-and-data/profiles/county-profiles/spalding-county-profile/'},
    // {"COUNTYFP10": "297", "Name": 'Walton', "URL":'http://77.104.152.48/~arctrpst/neighborhoodnexus/maps-and-data/profiles/county-profiles/Walton-county-profile/'}

    // ];
    mapboxgl.accessToken = 'pk.eyJ1IjoiYXRscmVnaW9uYWwiLCJhIjoiQmZ6d2tyMCJ9.oENm3NSf--qHrimdm9Vvdw';
    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/light-v9',
        center: [-84.44403686523438, 33.81908916394128],
        zoom: 8,
        pitch: 30
    });
    map.on('load', function() {
        // Add a GeoJSON source containing the county polygons.
        map.addSource('mpoCounties', {
            'type': 'geojson',
            'data': 'Counties_Atl_Region.geojson'
                // 'id': 'layername'
        });
        //     Add a layer showing the state polygons.
        map.addLayer({
            'id': 'Barrow',
            'type': 'fill',
            'layout': {},
            'source': 'mpoCounties',
            // 'interactive': true,
            'paint': {
                'fill-color': '#71A391',
                'fill-opacity': 0.7,
                'fill-outline-color': 'lightgrey',
            },
            'filter': [
                '==', 'NAME10', 'Barrow'
            ]
        });
        map.addLayer({
            'id': 'Bartow',
            'type': 'fill',
            'layout': {},
            'source': 'mpoCounties',
            // 'interactive': true,
            'paint': {
                'fill-color': '#71A391',
                'fill-opacity': 0.7,
                'fill-outline-color': 'lightgrey',
            },
            'filter': [
                '==', 'NAME10', 'Bartow'
            ],
        }, 'place_label_county_small_s');
        map.addLayer({
            'id': 'Carroll',
            'type': 'fill',
            'source': 'mpoCounties',
            // 'interactive': true,
            'paint': {
                'fill-color': '#13175e',
                'fill-opacity': 0.7,
                'fill-outline-color': 'lightgrey',
            },
            'filter': [
                '==', 'NAME10', 'Carroll'
            ]
        });
        map.addLayer({
            'id': 'Cherokee',
            'type': 'fill',
            'source': 'mpoCounties',
            // 'interactive': true,
            'paint': {
                'fill-color': '#7871A3',
                'fill-opacity': 0.7,
            },
            'filter': [
                '==', 'NAME10', 'Cherokee'
            ]
        });
        map.addLayer({
            'id': 'Clayton',
            'type': 'fill',
            'source': 'mpoCounties',
            // 'interactive': true,
            'paint': {
                'fill-color': '#A3719C',
                'fill-opacity': 0.7,
            },
            'filter': [
                '==', 'NAME10', 'Clayton'
            ]
        });
        map.addLayer({
            'id': 'Cobb',
            'type': 'fill',
            'source': 'mpoCounties',
            // 'interactive': true,
            'paint': {
                'fill-color': '#C6DAD3',
                'fill-opacity': 0.7,
            },
            'filter': [
                '==', 'NAME10', 'Cobb'
            ]
        });
        map.addLayer({
            'id': 'Coweta',
            'type': 'fill',
            'source': 'mpoCounties',
            // 'interactive': true,
            'paint': {
                'fill-color': '#A39171',
                'fill-opacity': 0.7,
            },
            'filter': [
                '==', 'NAME10', 'Coweta'
            ]
        });
        // map.addLayer({
        //     'id': 'dawson',
        //     'type': 'fill',
        //     'source': 'mpoCounties',
        //     // 'interactive': true,
        //     'paint': {
        //         'fill-color': '#9171A3',
        //         'fill-opacity': 0.5,
        //     },
        //     'filter': [
        //         '==', 'NAME10', 'Dawson'
        //     ]
        // });
        map.addLayer({
            'id': 'DeKalb',
            'type': 'fill',
            'source': 'mpoCounties',
            // 'interactive': true,
            'paint': {
                'fill-color': '#9CA371',
                'fill-opacity': 0.7,
            },
            'filter': [
                '==', 'NAME10', 'DeKalb'
            ]
        });
        map.addLayer({
            'id': 'Douglas',
            'type': 'fill',
            'source': 'mpoCounties',
            // 'interactive': true,
            'paint': {
                'fill-color': '#A37183',
                'fill-opacity': 0.7,
            },
            'filter': [
                '==', 'NAME10', 'Douglas'
            ]
        });
        map.addLayer({
            'id': 'Fayette',
            'type': 'fill',
            'source': 'mpoCounties',
            // 'interactive': true,
            'paint': {
                'fill-color': '#7183a3',
                'fill-opacity': 0.7,
            },
            'filter': [
                '==', 'NAME10', 'Fayette'
            ]
        });
        map.addLayer({
            'id': 'Forsyth',
            'type': 'fill',
            'source': 'mpoCounties',
            // 'interactive': true,
            'paint': {
                'fill-color': '#71A391',
                'fill-opacity': 0.7,
            },
            'filter': [
                '==', 'NAME10', 'Forsyth'
            ]
        });
        map.addLayer({
            'id': 'Fulton',
            'type': 'fill',
            'source': 'mpoCounties',
            // 'interactive': true,
            'paint': {
                'fill-color': '#13175e',
                'fill-opacity': 0.7,
            },
            'filter': [
                '==', 'NAME10', 'Fulton'
            ]
        });
        map.addLayer({
            'id': 'Gwinnett',
            'type': 'fill',
            'source': 'mpoCounties',
            // 'interactive': true,
            'paint': {
                'fill-color': '#7871A3',
                'fill-opacity': 0.7,
            },
            'filter': [
                '==', 'NAME10', 'Gwinnett'
            ]
        });
         map.addLayer({
            'id': 'Hall',
            'type': 'fill',
            'source': 'mpoCounties',
            // 'interactive': true,
            'paint': {
                'fill-color': '#7871A3',
                'fill-opacity': 0.7,
            },
            'filter': [
                '==', 'NAME10', 'Hall'
            ]
        });
        map.addLayer({
            'id': 'Henry',
            'type': 'fill',
            'source': 'mpoCounties',
            // 'interactive': true,
            'paint': {
                'fill-color': '#A3719C',
                'fill-opacity': 0.7,
            },
            'filter': [
                '==', 'NAME10', 'Henry'
            ]
        });
        map.addLayer({
            'id': 'Newton',
            'type': 'fill',
            'source': 'mpoCounties',
            // 'interactive': true,
            'paint': {
                'fill-color': '#C6DAD3',
                'fill-opacity': 0.7,
            },
            'filter': [
                '==', 'NAME10', 'Newton'
            ]
        });
         map.addLayer({
            'id': 'Paulding',
            'type': 'fill',
            'source': 'mpoCounties',
            // 'interactive': true,
            'paint': {
                'fill-color': '#A39171',
                'fill-opacity': 0.7,
            },
            'filter': [
                '==', 'NAME10', 'Paulding'
            ]
        });
        // map.addLayer({
        //     'id': 'Pike',
        //     'type': 'fill',
        //     'source': 'mpoCounties',
        //     // 'interactive': true,
        //     'paint': {
        //         'fill-color': '#9171A3',
        //         'fill-opacity': 0.7,
        //     },
        //     'filter': [
        //         '==', 'NAME10', 'Pike'
        //     ]
        // });
        map.addLayer({
            'id': 'Rockdale',
            'type': 'fill',
            'source': 'mpoCounties',
            // 'interactive': true,
            'paint': {
                'fill-color': '#9CA371',
                'fill-opacity': 0.5,
            },
            'filter': [
                '==', 'NAME10', 'Rockdale'
            ]
        });
        map.addLayer({
            'id': 'Spalding',
            'type': 'fill',
            'source': 'mpoCounties',
            // 'interactive': true,
            'paint': {
                'fill-color': '#A37183',
                'fill-opacity': 0.8,
            },
            'filter': [
                '==', 'NAME10', 'Spalding'
            ]
        });
        map.addLayer({
            'id': 'Walton',
            'type': 'fill',
            'source': 'mpoCounties',
            // 'interactive': true,
            'paint': {
                'fill-color': '#7183a3',
                'fill-opacity': 0.7,
            },
            'filter': [
                '==', 'NAME10', 'Walton'
            ]
        });
        // Add a layer showing the state polygons.
        map.addLayer({
            'id': 'county-layer',
            'type': 'fill',
            'source': 'mpoCounties',
            'paint': {
                'fill-color': 'rgba(223,223,237,0.0)',
                'fill-outline-color': '#DDFFF6',
            }
        });
        // map.addLayer({
        //     "id": "clusters-label",
        //     "type": "symbol",
        //     "source": "clusters",
        //     "layout": {
        //         "text-field": "{museum_count}",
        //         "text-font": [
        //             "DIN Offc Pro Medium",
        //             "Arial Unicode MS Bold"
        //         ],
        //         "text-size": 12
        //     }
        // });

    });

    // When a click event occurs near a polygon, open a popup at the location of
    // the feature, with description HTML from its properties.
    map.on('click', function(e) {
        var features = map.queryRenderedFeatures(e.point, {
            layers: ['county-layer']
        });
        if (!features.length) {
            return;
        }

        var feature = features[0];

        var popup = new mapboxgl.Popup()
            .setLngLat(map.unproject(e.point))
            // .setHTML(feature.properties.NAMELSAD10 + "<br> 2010 Total population: " + feature.properties.totpop10 + "<br>" + feature.properties.count)
            .setHTML(feature.properties.NAMELSAD10  + '<br> <a href="' +feature.properties.Link +'"target="_blank">Visit the County Profile</a>')
            // .setURL('<a href="http://www.google.com">Visit Google</a>"')
            .addTo(map);
    });

    // Use the same approach as above to indicate that the symbols are clickable
    // by changing the cursor style to 'pointer'.
    map.on('mousemove', function(e) {
        var features = map.queryRenderedFeatures(e.point, {
            layers: ['county-layer']
        });
        map.getCanvas().style.cursor = (features.length) ? 'pointer' : '';
    });
    </script>
</body>

</html>
